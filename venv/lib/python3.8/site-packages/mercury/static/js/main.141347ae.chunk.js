(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{217:function(e,t,a){},318:function(e,t,a){},320:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(38),o=a(6),s=a.n(o),c=a(5),i=a(17),l=a(9),d=a.n(l),u=a(15),b=a(24),p=a(19),j=a(137),h=a(73),f=a.n(h),m=function(){var e=sessionStorage.getItem("sessionId");return null==e&&(e=Object(j.v4)(),sessionStorage.setItem("sessionId",e)),e},v=function(e){"undefined"!==typeof e&&e?s.a.defaults.headers.common.Authorization="Token "+e:delete s.a.defaults.headers.common.Authorization},x=function(e,t){s.a.get(e,{responseType:"blob"}).then((function(e){f()(e.data,t)}))},O=null;localStorage.getItem("token")&&(O=localStorage.getItem("token"),v(O));var g={token:O,username:"",user:{pk:0,username:"",first_name:"",last_name:"",email:""}},y=Object(b.b)({name:"auth",initialState:g,reducers:{setToken:function(e,t){e.token=t.payload,v(e.token),e.token?localStorage.setItem("token",e.token):localStorage.removeItem("token")},setUsername:function(e,t){e.username=t.payload?t.payload:"",e.username&&""!==e.username?localStorage.setItem("username",e.username):localStorage.removeItem("username")},setUserInfo:function(e,t){e.user=t.payload}}}),w=y.reducer,k=y.actions,N=k.setToken,S=k.setUsername,P=k.setUserInfo,T=function(e){return e.auth.token},C=function(e){return e.auth.username},E=function(e){return e.auth.user},R=Object(b.b)({name:"version",initialState:{fetchingIsPro:!0,isPro:!1,welcome:""},reducers:{setVersion:function(e,t){var a=t.payload.isPro;e.isPro=a,e.fetchingIsPro=!1},setWelcome:function(e,t){e.welcome=t.payload}}}),A=R.reducer,D=R.actions,F=D.setVersion,I=D.setWelcome,_=function(e){return e.version.isPro},M=function(e){return e.version.fetchingIsPro},L=function(e){return e.version.welcome},W=a(37),H=a(14),U=(a(217),a(0));function B(){return Object(U.jsx)("div",{style:{color:"white",padding:"5px",float:"right"},children:Object(U.jsxs)("a",{href:"/login",className:"btn btn-primary btn-sm ",children:[Object(U.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})})}function z(e){var t=e.username,a=Object(c.b)(),n=Object(i.f)();return Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"dropdown",style:{float:"right"},children:[Object(U.jsx)("a",{className:"btn btn-secondary btn-sm dropdown-toggle",style:{margin:"5px"},href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false",children:t}),Object(U.jsxs)("ul",{className:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuLink",children:[Object(U.jsx)("li",{children:Object(U.jsxs)("a",{className:"dropdown-item",href:"/account",children:[Object(U.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," Account"]})}),Object(U.jsx)("li",{children:Object(U.jsx)("hr",{className:"dropdown-divider"})}),Object(U.jsx)("li",{children:Object(U.jsxs)("a",{className:"dropdown-item",onClick:function(){return a(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,s.a.post("/api/v1/auth/logout/");case 4:p.b.success("Log out successfull"),a(N("")),a(S("")),e.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),p.b.error("Problem during log out");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(n))},children:[Object(U.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})," Log out"]})})]})]})})}function J(e){var t=e.isPro,a=e.username;return Object(U.jsxs)("header",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0",children:[Object(U.jsx)("a",{className:"navbar-brand col-md-3 col-lg-3 me-0 px-3",href:"/",children:Object(U.jsx)("img",{alt:"Mercury",src:"/static/mercury_logo.svg",style:{height:"28px",paddingLeft:"10px"}})}),t&&""===a&&Object(U.jsx)(B,{}),t&&""!==a&&Object(U.jsx)(z,{username:a})]})}var K=a(10),V=a(61),q=Object(b.b)({name:"app",initialState:{view:"app",files:[],filesState:"unknown",showSideBar:!0},reducers:{setView:function(e,t){e.view=t.payload},setFilesState:function(e,t){e.filesState=t.payload},setFiles:function(e,t){e.files=t.payload},setShowSideBar:function(e,t){e.showSideBar=t.payload},toggleShowSideBar:function(e){e.showSideBar=!e.showSideBar}}}),Y=q.reducer,Q=q.actions,G=Q.setView,Z=Q.setFilesState,X=Q.setFiles,$=Q.setShowSideBar,ee=(Q.toggleShowSideBar,function(e){return e.app.view}),te=function(e){return e.app.filesState},ae=function(e){return e.app.files},ne=function(e){return e.app.showSideBar};function re(e){return"select"===e.input}function oe(e){return"checkbox"===e.input}function se(e){return"numeric"===e.input}function ce(e){return"slider"===e.input}function ie(e){return"range"===e.input}function le(e){return"text"===e.input}function de(e){return"dir"===e.output}function ue(e){return"markdown"===e.output}function be(e){return"button"===e.input}function pe(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var je={notebooks:[],loadingState:"loading",selectedNotebook:{},selectedNotebookId:void 0,loadingStateSelected:"loading",watchModeCounter:0,slidesHash:"",widgets:{}},he=Object(b.b)({name:"notebooks",initialState:je,reducers:{setWidgetValue:function(e,t){var a=t.payload,n=a.key,r=a.value;e.widgets[n]=r},clearWidgets:function(e){e.widgets={}},setNotebooks:function(e,t){e.notebooks=t.payload},setLoadingState:function(e,t){e.loadingState=t.payload},setSelectedNotebook:function(e,t){t.payload.state.startsWith("WATCH")&&e.selectedNotebook.file_updated_at===t.payload.file_updated_at||(e.selectedNotebook=t.payload,e.selectedNotebookId=e.selectedNotebook.id),t.payload.state.startsWith("WATCH")&&(e.watchModeCounter+=1)},setLoadingStateSelected:function(e,t){e.loadingStateSelected=t.payload},setSlidesHash:function(e,t){e.slidesHash=t.payload},updateWidgetsParams:function(e,t){for(var a=t.payload.widgetKey,n=!1,r=!0,o=0,s=Object.keys(e.selectedNotebook.params.params);o<s.length;o++){var c=s[o];if(c===a){r=!1;var i=Object(K.a)({},e.selectedNotebook.params.params[a]);ie(i)?(i.min!==t.payload.min&&(i.min=t.payload.min,e.widgets[c]=t.payload.value,n=!0),i.max!==t.payload.max&&(i.max=t.payload.max,e.widgets[c]=t.payload.value,n=!0),i.step!==t.payload.step&&(i.step=t.payload.step,e.widgets[c]=t.payload.value,n=!0),i.label!==t.payload.label&&(i.label=t.payload.label,n=!0)):le(i)?(i.rows!==t.payload.rows&&(i.rows=t.payload.rows,n=!0),i.label!==t.payload.label&&(i.label=t.payload.label,n=!0)):ce(i)?(i.min!==t.payload.min&&(i.min=t.payload.min,e.widgets[c]=t.payload.value,n=!0),i.max!==t.payload.max&&(i.max=t.payload.max,e.widgets[c]=t.payload.value,n=!0),i.step!==t.payload.step&&(i.step=t.payload.step,e.widgets[c]=t.payload.value,n=!0),i.label!==t.payload.label&&(i.label=t.payload.label,n=!0)):re(i)?(i.choices.toString()!==t.payload.choices.toString()&&(i.choices=t.payload.choices,e.widgets[c]=t.payload.value,n=!0),i.label!==t.payload.label&&(i.label=t.payload.label,n=!0)):oe(i)?i.label!==t.payload.label&&(i.label=t.payload.label,n=!0):se(i)?(i.min!==t.payload.min&&(i.min=t.payload.min,e.widgets[c]=t.payload.value,n=!0),i.max!==t.payload.max&&(i.max=t.payload.max,e.widgets[c]=t.payload.value,n=!0),i.step!==t.payload.step&&(i.step=t.payload.step,e.widgets[c]=t.payload.value,n=!0),i.label!==t.payload.label&&(i.label=t.payload.label,n=!0)):ue(i)?i.value!==t.payload.value&&(i.value=t.payload.value,n=!0):be(i)&&(e.widgets[c]=t.payload.value,i.label!==t.payload.label&&(i.label=t.payload.label,n=!0),i.style!==t.payload.style&&(i.style=t.payload.style,n=!0)),n&&(e.selectedNotebook.params.params[a]=i)}}r&&(e.selectedNotebook.params.params[a]=t.payload)},hideWidgets:function(e,t){var a,n=t.payload.keys,r=Object(V.a)(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;o in e.selectedNotebook.params.params&&delete e.selectedNotebook.params.params[o]}}catch(s){r.e(s)}finally{r.f()}},initWidgets:function(e,t){var a=t.payload.widgets;e.selectedNotebook.params.params={},e.widgets={};var n,r=Object(V.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.selectedNotebook.params.params[o.widgetKey]=o,e.widgets[o.widgetKey]=o.value}}catch(s){r.e(s)}finally{r.f()}},updateTitle:function(e,t){e.selectedNotebook.title=t.payload},updateShowCode:function(e,t){e.selectedNotebook.params["show-code"]=t.payload}}}),fe=he.reducer,me=he.actions,ve=me.setNotebooks,xe=me.setLoadingState,Oe=me.setSelectedNotebook,ge=me.setLoadingStateSelected,ye=me.setSlidesHash,we=me.updateWidgetsParams,ke=me.hideWidgets,Ne=me.setWidgetValue,Se=(me.clearWidgets,me.initWidgets),Pe=me.updateTitle,Te=me.updateShowCode,Ce=function(e){return e.notebooks.notebooks},Ee=function(e){return e.notebooks.loadingState},Re=function(e){return e.notebooks.selectedNotebook},Ae=function(e){return e.notebooks.selectedNotebookId},De=function(e){var t,a,n=null===(t=e.notebooks.selectedNotebook)||void 0===t||null===(a=t.params)||void 0===a?void 0:a.static_notebook;return void 0!==n&&n},Fe=function(e){return e.notebooks.loadingStateSelected},Ie=function(e){return e.notebooks.watchModeCounter},_e=function(e){return e.notebooks.slidesHash},Me=function(e){return e.notebooks.widgets},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(u.a)(d.a.mark((function a(n){var r,o,c,i,l,u;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t||(n(ye("")),n(Ge())),r=pe(),o=r.width,n($(o>992)),t||n(ge("loading")),c="/api/v1/notebooks/".concat(e,"/"),a.next=8,s.a.get(c);case 8:i=a.sent,l=i.data,u=JSON.parse(l.params),n(Oe(Object(K.a)(Object(K.a)({},l),{},{params:u}))),t||n(ge("loaded")),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(0),t||n(ge("error")),console.error("Problem during loading selected notebook (".concat(e,"). ").concat(a.t0));case 19:case"end":return a.stop()}}),a,null,[[0,15]])})));return function(e){return a.apply(this,arguments)}}()},We=Object(b.b)({name:"tasks",initialState:{currentTask:{},historicTask:{},showCurrent:!0,previousTask:{},exportingToPDF:!1,exportToPDFJobId:"",exportToPDFCounter:0,executionHistory:[]},reducers:{setShowCurrent:function(e,t){e.showCurrent=t.payload},setCurrentTask:function(e,t){e.currentTask=t.payload},setHistoricTask:function(e,t){e.historicTask=t.payload},setPreviousTask:function(e,t){e.previousTask=t.payload},copyCurrentToPreviousTask:function(e){e.previousTask=e.currentTask},setExportingToPDF:function(e,t){e.exportingToPDF=t.payload},setExportToPDFJobId:function(e,t){e.exportToPDFJobId=t.payload},resetExportToPDFCounter:function(e){e.exportToPDFCounter=0},increaseExportToPDFCounter:function(e){e.exportToPDFCounter+=1},stopPDFExport:function(e){e.exportingToPDF=!1,e.exportToPDFJobId="",e.exportToPDFCounter=0},setExecutionHistory:function(e,t){e.executionHistory=t.payload},clearExecutionHistory:function(e){e.executionHistory=[]}}}),He=We.reducer,Ue=We.actions,Be=(Ue.setShowCurrent,Ue.setCurrentTask),ze=Ue.setHistoricTask,Je=(Ue.setPreviousTask,Ue.copyCurrentToPreviousTask,Ue.setExportingToPDF),Ke=Ue.setExportToPDFJobId,Ve=Ue.resetExportToPDFCounter,qe=Ue.increaseExportToPDFCounter,Ye=Ue.stopPDFExport,Qe=Ue.setExecutionHistory,Ge=Ue.clearExecutionHistory,Ze=function(e){return e.tasks.currentTask},Xe=function(e){return e.tasks.historicTask},$e=function(e){return e.tasks.previousTask},et=function(e){return e.tasks.exportingToPDF},tt=function(e){return e.tasks.exportToPDFJobId},at=function(e){return e.tasks.exportToPDFCounter},nt=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var n,r,o,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m(),t.prev=1,r="/api/v1/latest_task/".concat(e,"/").concat(n),t.next=5,s.a.get(r);case 5:o=t.sent,c=o.data,a(Be(c)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a(Be({}));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},rt=function(){try{var e,t,a=document.getElementById("main-iframe"),n=null===a||void 0===a||null===(e=a.contentWindow)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.hash;if(n)return n}catch(r){}return""};function ot(e){var t=e.widgetKey,a=e.label,r=e.value,o=e.disabled,s=e.runNb,i=Object(c.b)(),l=Object(n.useState)(!1),d=Object(H.a)(l,2),u=d[0],b=d[1];return Object(n.useEffect)((function(){u&&s()}),[r]),Object(U.jsxs)("div",{className:"form-group form-check form-switch mb-3",children:[Object(U.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox-".concat(a),disabled:o,onChange:function(){b(!0),i(Ne({key:t,value:!r}))},checked:null!=r&&r}),Object(U.jsx)("label",{className:"form-check-label",htmlFor:"checkbox-".concat(a),style:{color:o?"#555":"#212529"},children:a})]})}function st(e){var t=e.widgetKey,a=e.label,r=e.value,o=e.min,s=e.max,i=e.step,l=e.disabled,d=e.runNb,u=e.continuousUpdate,b=Object(c.b)(),p=Object(n.useState)(!1),j=Object(H.a)(p,2),h=j[0],f=j[1],m=void 0,v=void 0,x=1;o&&(m=o),s&&(v=s),i&&(x=i);var O="";r&&(O=r);var g=function(){o&&r&&r<o&&b(Ne({key:t,value:o})),s&&r&&r>s&&b(Ne({key:t,value:s}))};return Object(U.jsxs)("div",{className:"form-group mb-3",children:[Object(U.jsx)("label",{htmlFor:"checkbox-".concat(a),style:{color:l?"#555":"#212529"},children:a}),Object(U.jsx)("input",{className:"form-control",type:"number",value:O,onChange:function(e){f(!0),b(Ne({key:t,value:e.target.value}))},onBlur:function(e){g()},onKeyPress:function(e){"Enter"===e.key&&(g(),d(),f(!1),e.preventDefault())},min:m,max:v,step:x}),h&&u&&Object(U.jsx)("div",{style:{float:"right",position:"relative",top:"0px",left:"0px"},children:Object(U.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(e){g(),d(),f(!1),e.preventDefault()},style:{fontSize:"0.7em",border:"none"},children:"Press enter or click to apply"})})]})}var ct=a(54);function it(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.min,o=e.max,s=e.step,i=(e.vertical,e.disabled),l=e.runNb,d=Object(c.b)(),u=0,b=100,p=1;r&&(u=r),o&&(b=o),s&&(p=s);var j=null!=n&&void 0!==n&&2===n.length?n:[u,b];return Object(U.jsxs)("div",{className:"form-group mb-3",children:[Object(U.jsx)("label",{htmlFor:"range-slider-".concat(a),style:{color:i?"#555":"#212529"},children:a}),Object(U.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(U.jsx)(ct.Range,{disabled:i,values:j,step:p,min:u,max:b,onChange:function(e){d(Ne({key:t,value:e}))},onFinalChange:function(e){l()},renderTrack:function(e){var t=e.props,a=e.children;return Object(U.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(K.a)(Object(K.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(U.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(ct.getTrackBackground)({values:j,colors:["#ccc",i?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:u,max:b}),alignSelf:"center"},children:[a,Object(U.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(U.jsx)("div",{style:{float:"left"},children:u}),Object(U.jsx)("div",{style:{float:"right"},children:b})]})]})})},renderThumb:function(e){var t=e.index,a=e.props,n=e.isDragged;return Object(U.jsxs)("div",Object(K.a)(Object(K.a)({},a),{},{style:Object(K.a)(Object(K.a)({},a.style),{},{height:"18px",width:"18px",border:"None !important",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(U.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:i?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:j[t]}),Object(U.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:n?"#2684ff":"#CCC"}})]}))}})})]})}var lt=a(184);function dt(e){var t=e.widgetKey,a=e.label,r=e.value,o=e.choices,s=e.multi,i=e.disabled,l=e.runNb,d=Object(c.b)(),u=Object(n.useState)(!1),b=Object(H.a)(u,2),p=b[0],j=b[1],h={menu:function(e){return Object(K.a)(Object(K.a)({},e),{},{zIndex:100})}},f={value:"",label:""},m=[{value:"",label:""}],v=o.map((function(e){return r&&e===r&&!s&&(f={value:e,label:e}),{value:e,label:e}}));return s&&(m=[],o.map((function(e){return r&&r.includes(e)&&s&&m.push({value:e,label:e}),{value:e,label:e}}))),Object(n.useEffect)((function(){if(p){var e=setTimeout((function(){l()}),100);return function(){return clearTimeout(e)}}}),[r]),Object(U.jsxs)("div",{className:"form-group mb-3",children:[Object(U.jsx)("label",{htmlFor:"select-".concat(a),style:{color:i?"#555":"#212529"},children:a}),Object(U.jsx)(lt.a,{id:"select-".concat(a),isDisabled:i,name:a||"Select",styles:h,value:s?m:f,options:v,isMulti:s,onChange:function(e){if(e)if(j(!0),function(e){return void 0!==e.value}(e))d(Ne({key:t,value:e.value}));else{var a=Array.from(e.values()).filter((function(e){return void 0!==e}));d(Ne({key:t,value:a.map((function(e){return e.value}))}))}}})]})}function ut(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.min,o=e.max,s=e.step,i=(e.vertical,e.disabled),l=e.runNb,d=Object(c.b)(),u=0,b=100,p=1;r&&(u=r),o&&(b=o),s&&(p=s);var j=[null!==n?n:b];return Object(U.jsxs)("div",{className:"form-group mb-3",children:[Object(U.jsx)("label",{htmlFor:"slider-".concat(a),style:{color:i?"#555":"#212529"},children:a}),Object(U.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(U.jsx)(ct.Range,{disabled:i,values:j,step:p,min:u,max:b,onChange:function(e){d(Ne({key:t,value:e[0]}))},onFinalChange:function(e){l()},renderTrack:function(e){var t=e.props,a=e.children;return Object(U.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(K.a)(Object(K.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(U.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(ct.getTrackBackground)({values:j,colors:[i?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:u,max:b}),alignSelf:"center"},children:[a,Object(U.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(U.jsx)("div",{style:{float:"left"},children:u}),Object(U.jsx)("div",{style:{float:"right"},children:b})]})]})})},renderThumb:function(e){var t=e.props,a=e.isDragged;return Object(U.jsxs)("div",Object(K.a)(Object(K.a)({},t),{},{style:Object(K.a)(Object(K.a)({},t.style),{},{height:"18px",width:"18px",border:"None",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(U.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:i?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:j[0]}),Object(U.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:a?"#2684ff":"#CCC"}})]}))}})})]})}var bt=a(102),pt=a(139),jt=a.n(pt),ht=a(140),ft=a.n(ht),mt=a(141),vt=a.n(mt);function xt(e){var t=e.widgetKey,a=e.label,r=e.maxFileSize,o=e.disabled,i=e.value,l=e.runNb,b=Object(c.b)(),p=Object(n.useState)(!1),j=Object(H.a)(p,2),h=j[0],f=j[1],m="100MB";return r&&(m=r),Object(n.useEffect)((function(){h&&2===i.length&&l()}),[i]),Object(U.jsxs)("div",{className:"form-group mb-3",children:[Object(U.jsx)("label",{htmlFor:"file-".concat(a),style:{color:o?"#555":"#212529"},children:a}),Object(U.jsx)("div",{children:Object(U.jsx)(bt.FilePond,{disabled:o,maxFileSize:m,onprocessfile:function(e,a){f(!0),b(Ne({key:t,value:[a.filename,a.serverId]}))},server:{url:"".concat(s.a.defaults.baseURL,"/api/v1/fp"),process:"/process/",revert:function(){var e=Object(u.a)(d.a.mark((function e(a,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.delete("".concat(s.a.defaults.baseURL,"/api/v1/fp/revert"),{data:a});case 3:b(Ne({key:t,value:[]})),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r("Problem with uploaded file removal");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}()},labelIdle:'Drag & Drop your file or <span class="filepond--label-action">Browse</span>'})})]})}function Ot(e){var t=e.widgetKey,a=e.label,r=e.value,o=e.rows,s=e.disabled,i=e.runNb,l=e.continuousUpdate,d=Object(c.b)(),u=Object(n.useState)(!1),b=Object(H.a)(u,2),p=b[0],j=b[1],h=o||1,f=function(e){return e.replace(/["'(){}[\]`^]/gim,"")};return Object(U.jsxs)("div",{className:"form-group mb-3",children:[Object(U.jsx)("label",{htmlFor:"textarea-".concat(a),style:{color:s?"#555":"#212529"},children:a}),1===h&&Object(U.jsx)("input",{className:"form-control",type:"text",id:"text-".concat(a),value:r||"",onChange:function(e){j(!0),d(Ne({key:t,value:f(e.target.value)}))},onKeyPress:function(e){"Enter"===e.key&&(i(),j(!1),e.preventDefault())},disabled:s}),h>1&&Object(U.jsx)("textarea",{className:"form-control",id:"text-area-".concat(a),rows:h,value:r||"",onChange:function(e){j(!0),d(Ne({key:t,value:f(e.target.value)}))},disabled:s}),p&&l&&1===h&&Object(U.jsx)("div",{style:{fontSize:"0.7em",float:"right",position:"relative",top:"0px",left:"-5px",color:"#2684ff"},children:"Press enter to apply"}),p&&l&&h>1&&Object(U.jsx)("div",{style:{float:"right",position:"relative",top:"2px",left:"0px"},children:Object(U.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(e){i(),j(!1),e.preventDefault()},style:{fontSize:"0.7em"},children:"Apply"})})]})}Object(bt.registerPlugin)(jt.a,ft.a,vt.a);var gt,yt,wt=a(337),kt=a(338),Nt=a(88),St=a(91),Pt=a(89);function Tt(e){var t=e.value,a=e.disabled;return Object(U.jsx)("div",{className:"form-group mb-3",style:{color:a?"#555":"#212529"},children:Object(U.jsx)(wt.a,{rehypePlugins:[Nt.a,kt.a,St.a,Pt.a],children:t})})}!function(e){e.Connecting="Connecting",e.Connected="Connected",e.Unknown="Unknown",e.Disconnected="Disconnected"}(gt||(gt={})),function(e){e.Unknown="Unknown",e.Starting="Starting",e.Running="Running",e.Missing="Missing",e.Busy="Busy",e.Queued="Queued"}(yt||(yt={}));var Ct={webSocketState:gt.Unknown,workerState:yt.Unknown,workerId:void 0,notebookSrc:""},Et=Object(b.b)({name:"ws",initialState:Ct,reducers:{setWebSocketState:function(e,t){e.webSocketState=t.payload},setWorkerState:function(e,t){e.workerState=t.payload},setWorkerId:function(e,t){e.workerId=t.payload},setNotebookSrc:function(e,t){e.notebookSrc=t.payload}}}),Rt=Et.reducer,At=Et.actions,Dt=At.setWebSocketState,Ft=At.setWorkerState,It=At.setWorkerId,_t=At.setNotebookSrc,Mt=function(e){return e.ws.webSocketState},Lt=function(e){return e.ws.workerState},Wt=function(e){return e.ws.workerId},Ht=function(e){return e.ws.notebookSrc},Ut=Object(n.createContext)(void 0),Bt="ws://127.0.0.1:8000",zt=!0;function Jt(e){var t=e.children;console.log("WebSocketProvider");var a=Object(c.b)(),n=Object(c.c)(Ae),r=Object(c.c)(De),o=void 0,i=function(e){void 0!==o&&o.readyState===o.OPEN&&o.send(e)};function l(e){i(JSON.stringify({purpose:"server-address",address:Bt})),a(Dt(gt.Connected)),h()}function b(e){var t=JSON.parse(e.data);"purpose"in t&&("worker-state"===t.purpose?(a(Ft(t.state)),a(It(t.workerId))):"executed-notebook"===t.purpose?((null===t||void 0===t?void 0:t.reloadNotebook)&&void 0!==n&&a(Le(n)),a(_t(t.body))):"saved-notebook"===t.purpose?void 0!==n&&a(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var a=Object(u.a)(d.a.mark((function a(n){var r,o,c,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ze({})),t&&n(Ge()),r=m(),a.prev=3,o="/api/v1/execution_history/".concat(e,"/").concat(r),a.next=7,s.a.get(o);case 7:c=a.sent,i=c.data,n(Qe(i)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(3),n(Ge());case 15:case"end":return a.stop()}}),a,null,[[3,12]])})));return function(e){return a.apply(this,arguments)}}()}(n,!1)):"update-widgets"===t.purpose?a(we(t)):"hide-widgets"===t.purpose?a(ke(t)):"init-widgets"===t.purpose?a(Se(t)):"update-title"===t.purpose?a(Pe(t.title)):"update-show-code"===t.purpose?a(Te(t.showCode)):"download-html"!==t.purpose&&"download-pdf"!==t.purpose||t.url&&t.filename&&(a(Je(!1)),x(t.url,t.filename)))}function p(e){a(Dt(gt.Disconnected)),a(Ft(yt.Unknown))}function j(e){a(Dt(gt.Disconnected)),a(Ft(yt.Unknown)),a(It(void 0)),o=void 0,setTimeout((function(){return f()}),5e3)}function h(){i(JSON.stringify({purpose:"worker-ping"})),void 0!==o&&o.readyState===o.OPEN&&setTimeout((function(){return h()}),5e3)}function f(){!zt&&r||void 0===n||void 0!==o||((o=new WebSocket("".concat(Bt,"/ws/client/").concat(n,"/").concat(m(),"/"))).onopen=l,o.onmessage=b,o.onerror=p,o.onclose=j)}f();var v={sendMessage:i};return Object(U.jsx)(Ut.Provider,{value:v,children:t})}function Kt(){var e=Object(c.c)(Mt),t=Object(c.c)(Lt),a="orange";e===gt.Connected?a="green":e!==gt.Disconnected&&e!==gt.Unknown||(a="red");var n="orange";return t===yt.Running||t===yt.Busy?n="green":t!==yt.Missing&&t!==yt.Unknown||(n="red"),Object(U.jsxs)("div",{children:[Object(U.jsx)("span",{title:"WebSocket: ".concat(e),children:Object(U.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:a,className:"bi bi-wifi",viewBox:"0 0 16 16",children:[Object(U.jsx)("path",{d:"M15.384 6.115a.485.485 0 0 0-.047-.736A12.444 12.444 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c2.507 0 4.827.802 6.716 2.164.205.148.49.13.668-.049z"}),Object(U.jsx)("path",{d:"M13.229 8.271a.482.482 0 0 0-.063-.745A9.455 9.455 0 0 0 8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065A8.46 8.46 0 0 1 8 7a8.46 8.46 0 0 1 4.576 1.336c.206.132.48.108.653-.065zm-2.183 2.183c.226-.226.185-.605-.1-.75A6.473 6.473 0 0 0 8 9c-1.06 0-2.062.254-2.946.704-.285.145-.326.524-.1.75l.015.015c.16.16.407.19.611.09A5.478 5.478 0 0 1 8 10c.868 0 1.69.201 2.42.56.203.1.45.07.61-.091l.016-.015zM9.06 12.44c.196-.196.198-.52-.04-.66A1.99 1.99 0 0 0 8 11.5a1.99 1.99 0 0 0-1.02.28c-.238.14-.236.464-.04.66l.706.706a.5.5 0 0 0 .707 0l.707-.707z"})]})})," ",Object(U.jsx)("span",{title:"Worker: ".concat(t,"\nSession Id: ").concat(m()),children:Object(U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:n,className:"bi bi-cpu",viewBox:"0 0 16 16",children:Object(U.jsx)("path",{d:"M5 0a.5.5 0 0 1 .5.5V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2A2.5 2.5 0 0 1 14 4.5h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14a2.5 2.5 0 0 1-2.5 2.5v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14A2.5 2.5 0 0 1 2 11.5H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2A2.5 2.5 0 0 1 4.5 2V.5A.5.5 0 0 1 5 0zm-.5 3A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 11.5 3h-7zM5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3zM6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"})})}),t===yt.Busy&&Object(U.jsxs)("span",{title:"Worker is busy",children:[" ",Object(U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"green",className:"bi bi-activity",viewBox:"0 0 16 16",children:Object(U.jsx)("path",{fillRule:"evenodd",d:"M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"})})," Busy"]})]})}function Vt(e){var t=e.widgetKey,a=e.label,r=e.style,o=e.value,s=e.disabled,i=e.runNb,l=Object(c.b)(),d="btn-primary";return"success"===r?d="btn-success":"danger"===r?d="btn-danger":"info"===r?d="btn-info":"warning"===r&&(d="btn-warning"),Object(n.useEffect)((function(){o&&(console.log("run from button"),i())}),[o]),Object(U.jsx)("div",{className:"form-group mb-3",children:Object(U.jsx)("button",{type:"button",className:"btn ".concat(d),style:{marginRight:"10px",width:"47%"},onClick:function(){l(Ne({key:t,value:!0}))},disabled:s,children:a})})}function qt(e){var t=e.runNb,a=e.waiting,n=e.workerState;return Object(U.jsxs)("button",{type:"button",className:"btn btn-success",style:{marginRight:"10px",width:"47%"},onClick:function(){t()},disabled:a||n!==yt.Running,children:[n===yt.Running&&Object(U.jsxs)("span",{children:[Object(U.jsx)("i",{className:"fa fa-play","aria-hidden":"true"})," Run"]}),n===yt.Busy&&Object(U.jsxs)("span",{children:[Object(U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",className:"bi bi-activity",viewBox:"0 0 16 16",children:Object(U.jsx)("path",{fillRule:"evenodd",d:"M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"})})," ","Busy"]}),n!==yt.Busy&&n!==yt.Running&&Object(U.jsx)("span",{children:"Wait for worker ..."})]})}"http://localhost:3000"===window.location.origin?(Bt="ws://127.0.0.1:8000",zt=!0):(Bt=window.location.origin.replace("http://","ws://").replace("https://","wss://"),zt=!1);var Yt=a(45);function Qt(e){var t=e.notebookTitle,a=e.notebookId,r=e.notebookSchedule,o=e.taskCreatedAt,i=(e.loadingState,e.waiting),l=e.widgetsParams,b=e.watchMode,j=e.notebookPath,h=e.displayEmbed,f=e.showFiles,v=e.isPresentation,O=(e.notebookParseErrors,e.continuousUpdate),g=e.staticNotebook,y=Object(c.b)(),w=Object(c.c)(Me),k=Object(c.c)(Lt),N=Object(n.useContext)(Ut),S=function(){O&&P()},P=function(){var e=rt();y(ye(e)),N.sendMessage(JSON.stringify({purpose:"run-notebook",widgets:JSON.stringify(w)}))};Object(n.useEffect)((function(){if(l)for(var e=0,t=Object.entries(l);e<t.length;e++){var a=Object(H.a)(t[e],2),n=a[0],r=a[1];n in w||("file"===r.input?y(Ne({key:n,value:[]})):"text"===r.input?y(Ne({key:n,value:r.value?r.value:""})):ue(r)||(de(r)?y(Ne({key:n,value:"output-dir"})):y(Ne({key:n,value:r.value}))))}}),[y,l,w]);var T=[],C=[];if(l&&!g){for(var E=[],R=0,A=Object.keys(l);R<A.length;R++){var D=A[R],F=D.split(".");E.push([D,parseFloat("".concat(F[1],".").concat(F[2]))])}E.sort((function(e,t){return e[1]-t[1]}));for(var I=0,_=E;I<_.length;I++){var M=_[I][0],L=l[M];re(L)?T.push(Object(U.jsx)(dt,{widgetKey:M,disabled:i,label:null===L||void 0===L?void 0:L.label,value:w[M],choices:null===L||void 0===L?void 0:L.choices,multi:null===L||void 0===L?void 0:L.multi,runNb:S},M)):oe(L)?T.push(Object(U.jsx)(ot,{widgetKey:M,disabled:i,label:null===L||void 0===L?void 0:L.label,value:w[M],runNb:S},M)):se(L)?T.push(Object(U.jsx)(st,{widgetKey:M,disabled:i,label:null===L||void 0===L?void 0:L.label,value:w[M],min:null===L||void 0===L?void 0:L.min,max:null===L||void 0===L?void 0:L.max,step:null===L||void 0===L?void 0:L.step,runNb:S,continuousUpdate:O},M)):ce(L)?T.push(Object(U.jsx)(ut,{widgetKey:M,disabled:i,label:null===L||void 0===L?void 0:L.label,value:w[M],min:null===L||void 0===L?void 0:L.min,max:null===L||void 0===L?void 0:L.max,step:null===L||void 0===L?void 0:L.step,vertical:null===L||void 0===L?void 0:L.vertical,runNb:S},M)):ie(L)?T.push(Object(U.jsx)(it,{widgetKey:M,disabled:i,label:null===L||void 0===L?void 0:L.label,value:w[M],min:null===L||void 0===L?void 0:L.min,max:null===L||void 0===L?void 0:L.max,step:null===L||void 0===L?void 0:L.step,vertical:null===L||void 0===L?void 0:L.vertical,runNb:S},M)):"file"===L.input?(T.push(Object(U.jsx)(xt,{widgetKey:M,disabled:i,label:null===L||void 0===L?void 0:L.label,maxFileSize:null===L||void 0===L?void 0:L.maxFileSize,value:w[M],runNb:S},M)),C.push(M)):le(L)?T.push(Object(U.jsx)(Ot,{widgetKey:M,disabled:i,label:null===L||void 0===L?void 0:L.label,value:w[M],rows:null===L||void 0===L?void 0:L.rows,runNb:S,continuousUpdate:O},M)):ue(L)?T.push(Object(U.jsx)(Tt,{value:L.value,disabled:i},M)):be(L)?T.push(Object(U.jsx)(Vt,{widgetKey:M,disabled:i,label:null===L||void 0===L?void 0:L.label,value:w[M],style:null===L||void 0===L?void 0:L.style,runNb:S},M)):de(L)||console.log("Unknown widget type",L)}}var W={};return h&&(W={padding:"0px"}),Object(U.jsx)("nav",{id:"sidebarMenu",className:"col-lg-3 d-md-block bg-light sidebar",style:Object(K.a)(Object(K.a)({},W),{},{overflowY:"auto"}),children:Object(U.jsx)(Yt.a,{blocking:!1,message:"",children:Object(U.jsxs)("div",{className:"position-sticky p-3",children:[Object(U.jsxs)("h4",{children:[t,Object(U.jsx)("button",{className:"btn btn-sm  btn-outline-primary",type:"button",style:{float:"right",zIndex:"101"},onClick:function(){return y($(!1))},"data-toggle":"tooltip","data-placement":"right",title:"Hide sidebar",children:Object(U.jsx)("i",{className:"fa fa-chevron-left","aria-hidden":"true"})})]}),Object(U.jsx)("div",{style:{padding:"0px"},children:Object(U.jsxs)("form",{children:[T,Object(U.jsxs)("div",{className:"form-group mb-3 pb-1 pt-2",children:[!O&&Object(U.jsx)(qt,{runNb:P,waiting:i,workerState:k}),Object(U.jsxs)("div",{className:"dropdown",style:{width:"47%",float:O?"left":"right"},children:[Object(U.jsx)("button",{className:"btn btn-primary dropdown-toggle",style:{margin:"0px",width:"100%"},type:"button","data-bs-toggle":"dropdown",disabled:i,children:"Download"}),Object(U.jsxs)("ul",{className:"dropdown-menu dropdown-menu-end",children:[Object(U.jsx)("li",{children:Object(U.jsxs)("a",{style:{cursor:"pointer"},className:"dropdown-item",onClick:function(){g?x("".concat(s.a.defaults.baseURL).concat(j),"".concat(t,".html")):g||N.sendMessage(JSON.stringify({purpose:"download-html"}))},children:[Object(U.jsx)("i",{className:"fa fa-file-code-o","aria-hidden":"true"})," ","Download as HTML"]})}),Object(U.jsx)("li",{children:Object(U.jsx)("hr",{className:"dropdown-divider"})}),Object(U.jsx)("li",{children:Object(U.jsxs)("button",{type:"button",className:"dropdown-item",onClick:function(){g?y(function(e,t){return function(){var a=Object(u.a)(d.a.mark((function a(n){var r,o,c,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(Je(!0)),n(Ve()),n(Ke("")),r=m(),o={session_id:r,notebook_id:e,notebook_path:t},a.next=9,s.a.post("/api/v1/export_pdf/",o);case 9:c=a.sent,i=c.data,n(Ke(i.job_id)),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),p.b.error("The error occured during PDF export. ".concat(a.t0)),n(Ye());case 18:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}(a,j)):(y(Je(!0)),g||N.sendMessage(JSON.stringify({purpose:"download-pdf"})))},children:[Object(U.jsx)("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"})," ","Download as PDF"]})})]})]})]}),""!==r&&Object(U.jsxs)("div",{className:"alert alert-success mb-3",role:"alert",children:[Object(U.jsxs)("p",{children:[Object(U.jsx)("i",{className:"fa fa-clock-o","aria-hidden":"true"})," ","Scheduled notebook at '",r,"'."]}),o&&Object(U.jsxs)("p",{children:[" ",Object(U.jsx)("i",{className:"fa fa-calendar","aria-hidden":"true"})," Last execution at ",o,"."]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("i",{className:"fa fa-refresh","aria-hidden":"true"})," Website refresh every minute."]})]}),O&&Object(U.jsx)("div",{children:Object(U.jsx)("br",{})}),i&&(k===yt.Unknown||k===yt.Queued)&&Object(U.jsxs)("div",{className:"alert alert-warning mb-3 mt-3",role:"alert",children:[Object(U.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})," Waiting for worker ..."]}),i&&k===yt.Starting&&Object(U.jsxs)("div",{className:"alert alert-success mb-3 mt-3",role:"alert",children:[Object(U.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})," Initializing worker ..."]}),b&&Object(U.jsxs)("div",{className:"alert alert-secondary mb-3 mt-3",role:"alert",children:[Object(U.jsx)("i",{className:"fa fa-refresh","aria-hidden":"true"})," Notebook in watch mode. All changes to Notebook will be automatically visible in Mercury."]}),v&&Object(U.jsxs)("div",{className:"alert alert-primary mb-3",role:"alert",children:[Object(U.jsx)("i",{className:"fa fa-television","aria-hidden":"true"})," Click on presentation and press ",Object(U.jsx)("b",{children:"F"})," for full screen. Press"," ",Object(U.jsx)("b",{children:"Esc"})," to quit.",Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("i",{className:"fa fa-arrows","aria-hidden":"true"})," Click on presentation and press ",Object(U.jsx)("b",{children:"Esc"})," to navigate slides."]})]})}),f&&Object(U.jsxs)("div",{children:[Object(U.jsx)("hr",{}),Object(U.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",style:{border:"none"},onClick:function(){y(G("app"))},children:[Object(U.jsx)("i",{className:"fa fa-laptop","aria-hidden":"true"})," App"]}),Object(U.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",style:{border:"none"},onClick:function(){y(G("files"))},children:[Object(U.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," ","Output Files"]})]}),void 0!==a&&!g&&Object(U.jsxs)("div",{children:[Object(U.jsx)("hr",{}),Object(U.jsxs)("div",{style:{paddingLeft:"10px"},children:[Object(U.jsx)(Kt,{})," "]})]})]})})})}var Gt=a(182);function Zt(e){var t=e.appView,a=e.loadingState,r=e.notebookPath,o=e.waiting,i=e.errorMsg,l=e.watchMode,d=e.displayEmbed,u=e.isPro,b=e.username,p=e.slidesHash,j=e.columnsWidth,h=e.isPresentation,f=function(){var e=Object(n.useState)(pe()),t=Object(H.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r(pe())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().height,m=d?f-10:f-58,v=Object(c.b)(),x=Object(c.c)(Re),O=Object(c.c)(Ht),g=!1;if(void 0!==x&&void 0!==x.params&&void 0!==x.params["show-code"]&&null!==x.params["show-code"]&&(g=x.params["show-code"]),""!==O&&!h&&(O="<script>init_mathjax();<\/script>"+O,!g)){O='<style type="text/css">\n      .jp-mod-noOutputs {\n          padding: 0px; \n      }\n      .jp-mod-noInput {\n        padding-top: 0px;\n        padding-bottom: 0px;\n      }\n      </style>'+O}if(""!==O&&h&&""!==p&&-1===O.indexOf("Reveal.slide(")){var y=p.split("/"),w="";4===y.length?w="Reveal.slide(".concat(y[1],", ").concat(y[2],", ").concat(y[3],");"):3===y.length?w="Reveal.slide(".concat(y[1],", ").concat(y[2],");"):2===y.length&&(w="Reveal.slide(".concat(y[1],");")),""!==w&&(O=O.replace("setScrollingSlide);","setScrollingSlide); try{ ".concat(w," } catch(error) {}")))}Object(n.useEffect)((function(){void 0!==r&&s.a.get("".concat(s.a.defaults.baseURL).concat(r).concat(p)).then((function(e){var t=e.data;h||(t=(t=(t=(t=(t=(t=t.replace(/<head>[\s\S]*?<\/head>/,"")).replace("<html>","")).replace("</html>","")).replace("<body","<div")).replace("</body>","</div>")).replace("<!DOCTYPE html>","")),v(_t(t))}))}),[v,r,p,h]);var k={paddingTop:"0px",paddingRight:"0px",paddingLeft:"0px",display:"files"===t?"none":"block"};return Object(U.jsx)("main",{className:"ms-sm-auto col-lg-".concat(j),style:k,children:Object(U.jsx)(Yt.a,{tag:"div",blocking:o,children:Object(U.jsxs)("div",{children:["loading"===a&&!l&&Object(U.jsx)("p",{children:"Loading notebook. Please wait ..."}),"error"===a&&!u&&Object(U.jsx)("p",{style:{margin:"20px"},children:"Problem while loading notebook. Please try again later or contact Mercury administrator."}),"error"===a&&u&&""===b&&Object(U.jsxs)("p",{style:{margin:"20px"},children:[Object(U.jsx)("h5",{children:"Please log in to see the notebook"}),Object(U.jsxs)("a",{href:"/login",className:"btn btn-primary btn-sm ",children:[Object(U.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})]}),"error"===a&&u&&""!==b&&Object(U.jsx)("p",{style:{margin:"20px"},children:"Problem while loading notebook. Please try again later or contact Mercury administrator."}),i&&Object(U.jsxs)("div",{className:"alert alert-danger mb-3",role:"alert",children:[Object(U.jsx)("b",{children:"Notebook is executed with errors."}),Object(U.jsx)("p",{children:i})]}),""===i&&"loading"!==a&&h&&""!==O&&Object(U.jsx)("iframe",{width:"100%",height:m,srcDoc:O,title:"display",id:"main-iframe",onError:function(){console.log("iframe error")}},r),""!==O&&!h&&Object(U.jsx)(Gt.a,{html:O})]})})})}var Xt=function(e){var t=e.notebookId,a=Object(c.b)(),r=Object(c.c)(Re),o=Object(c.c)(Ie);return Object(n.useEffect)((function(){"WATCH_READY"!==r.state&&"WATCH_WAIT"!==r.state&&"WATCH_ERROR"!==r.state||setTimeout((function(){a(Le(t,!0)),a(nt(t))}),2e3)}),[a,r,t,o]),Object(U.jsx)("div",{})};function $t(e){var t,a=e.files,n=e.filesState,r=e.waiting,o=Object(c.b)(),i=[],l=Object(V.a)(a);try{var d=function(){var e=t.value,a=e.split("/").pop();e&&a&&i.push(Object(U.jsxs)("div",{children:[Object(U.jsx)("i",{className:"fa fa-file-text-o","aria-hidden":"true",style:{paddingRight:"5px"}})," ",Object(U.jsx)("b",{children:a}),Object(U.jsxs)("button",{style:{float:"right"},type:"button",className:"btn btn-primary",onClick:function(){return t="".concat(s.a.defaults.baseURL).concat(e),n=a,void s.a.get(t,{responseType:"blob"}).then((function(e){f()(e.data,n)}));var t,n},children:[Object(U.jsx)("i",{className:"fa fa-download","aria-hidden":"true"})," Download"]}),Object(U.jsx)("hr",{})]},e))};for(l.s();!(t=l.n()).done;)d()}catch(u){l.e(u)}finally{l.f()}return Object(U.jsxs)("main",{className:"col-md-9 ms-sm-auto col-lg-9",style:{padding:"20px"},children:[Object(U.jsxs)("div",{className:"col-8",children:[Object(U.jsxs)("h3",{style:{paddingBottom:"10px"},children:[Object(U.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," Output Files"]}),Object(U.jsx)(Yt.a,{tag:"div",blocking:r,children:Object(U.jsxs)("div",{children:["loaded"===n&&i,"unknown"===n&&Object(U.jsx)("p",{children:"Please run the notebook to produce output files ..."}),"loading"===n&&Object(U.jsx)("p",{children:"Loading files please wait ..."}),"error"===n&&Object(U.jsx)("div",{className:"alert alert-danger mb-3",role:"alert",children:"There was an error during loading files. Please try to run the app again or contact the administrator."})]})})]}),Object(U.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:function(){o(G("app"))},children:[Object(U.jsx)("i",{className:"fa fa-arrow-left","aria-hidden":"true"})," Back to App"]})]})}function ea(){return Object(U.jsx)("a",{href:"https://runmercury.com",target:"_blank",rel:"noreferrer",children:Object(U.jsxs)("div",{className:"poweredby",children:[Object(U.jsxs)("div",{className:"text-center",children:[" ",Object(U.jsx)("b",{style:{fontSize:"0.9em"},children:"created with"})," "]}),Object(U.jsx)("div",{children:Object(U.jsx)("img",{alt:"Mercury",src:"/static/mercury_black_logo.svg",style:{height:"27px"}})})]})})}function ta(e){for(var t=e.slug,a=e.widgetsParams,r=e.notebookPath,o=e.columnsWidth,i=e.taskSessionId,l=Object(n.useState)(JSON.stringify({msg:"Example output"})),b=Object(H.a)(l,2),p=b[0],j=b[1],h=Object(c.c)(Me),f={},m=0,v=Object.entries(a);m<v.length;m++){var x=Object(H.a)(v[m],2),O=x[0];x[1].input&&(f[O]=h[O])}function g(){return(g=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("get/".concat(i));case 3:t=e.sent,a=t.data,j(JSON.stringify(a)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(n.useEffect)((function(){i&&function(){g.apply(this,arguments)}()}),[i,r]);var y="id-with-some-random-string";i&&(y=i);var w='curl -X POST -H "Content-Type: application/json" -d \''.concat(JSON.stringify(f),"' ").concat(s.a.defaults.baseURL,"/run/").concat(t);return Object(U.jsxs)("div",{className:"ms-sm-auto col-lg-".concat(o),style:{border:"none",paddingTop:"0px",paddingRight:"0px",paddingLeft:"0px",padding:"10px"},children:[Object(U.jsx)("h4",{children:"Notebook as REST API"}),Object(U.jsx)("p",{children:"This notebook can be executed as REST API. Please see the examples below on how to access the notebook."}),Object(U.jsxs)("div",{className:"alert alert-secondary",role:"alert",children:[Object(U.jsx)("h5",{children:"POST request to execute the notebook"}),Object(U.jsx)("textarea",{disabled:!0,style:{width:"100%"},rows:3,value:w}),"The above request should return a JSON with `id`. The `id` should be used in the GET request to fetch the result.",Object(U.jsx)("br",{}),"Example response:",Object(U.jsx)("pre",{children:'{"id": "'.concat(y,'"}')})]}),Object(U.jsxs)("div",{className:"alert alert-secondary",role:"alert",children:[Object(U.jsx)("h5",{children:"GET request to get execution result in JSON"}),Object(U.jsx)("textarea",{disabled:!0,style:{width:"100%"},rows:1,value:"curl ".concat(s.a.defaults.baseURL,"/get/").concat(y)})]}),Object(U.jsxs)("div",{className:"alert alert-primary",role:"alert",children:[Object(U.jsx)("h5",{children:"Response"}),Object(U.jsx)("pre",{children:p})]})]})}function aa(e){var t=e.notebookId,a=Object(c.b)(),r=Object(c.c)(Re);return Object(n.useEffect)((function(){setTimeout((function(){a(Le(t,!0)),a(nt(t))}),6e4)}),[a,t,r]),Object(U.jsx)("div",{})}function na(){var e=Object(c.b)(),t=Object(c.c)(at),a=Object(c.c)(tt),r=Object(c.c)(et);return Object(n.useEffect)((function(){""!==a&&r&&(t<120?setTimeout((function(){e(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var n,r,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="/api/v1/get_pdf/".concat(e),t.next=4,s.a.get(n);case 4:r=t.sent,(o=r.data).ready?(a(Ye()),""!==o.error?p.b.error(o.error):x("".concat(s.a.defaults.baseURL).concat(o.url),"".concat(o.title))):a(qe()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),p.b.error("The error occured during PDF export. ".concat(t.t0)),a(Ye());case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(a))}),1e3):(e(Ye()),p.b.error("Problem with PDF export. Please try again later or ask your admin for help.",{autoClose:6e3})))}),[e,t,a,r]),Object(U.jsx)("div",{})}var ra=function(e){e.isSingleApp;var t,a,r,o,i,l=e.notebookId,b=e.displayEmbed,p=Object(c.b)(),j=Object(c.c)(Re),h=Object(c.c)(Fe),f=Object(c.c)(Ze),v=Object(c.c)(Xe),x=Object(c.c)($e),O=Object(c.c)(ee),g=Object(c.c)(ae),y=Object(c.c)(te),w=Object(c.c)(_),k=Object(c.c)(C),N=Object(c.c)(T),S=Object(c.c)(_e),P=Object(c.c)(ne),E=Object(c.c)(et),R=Object(c.c)(Wt),A=Object(c.c)(Lt),D=function(){var e;return!(null===j||void 0===j||null===(e=j.params)||void 0===e?void 0:e.static_notebook)&&A!==yt.Running},F=function(){return"WATCH_READY"===j.state||"WATCH_WAIT"===j.state||"WATCH_ERROR"===j.state};Object(n.useEffect)((function(){p(Le(l))}),[p,l,N]),Object(n.useEffect)((function(){var e;"files"===O&&"2"===(null===j||void 0===j||null===(e=j.params)||void 0===e?void 0:e.version)&&void 0!==R&&p(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var n,r,o,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(Z("loading")),a(X([])),n=m(),r="/api/v1/worker_output_files/".concat(n,"/").concat(e),t.next=7,s.a.get(r);case 7:o=t.sent,c=o.data,a(X(c)),a(Z("loaded")),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),a(Z("error")),console.error("Problem during loading worker output files. ".concat(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(R))}),[p,O,j,R]);var I=j.default_view_path;f.state&&"DONE"===f.state&&f.result&&(I=f.result);var M="";f.state&&f.result&&"ERROR"===f.state&&(M=f.result),v.state&&"DONE"===v.state&&v.result&&(I=v.result),v.state&&v.result&&"ERROR"===v.state&&(M=v.result),I===j.default_view_path&&x.state&&"DONE"===x.state&&x.result&&(I=x.result);var L=!1;return j.output&&j.output.toLowerCase().startsWith("rest")&&(L=!0),Object(U.jsxs)("div",{className:"App",children:[!b&&Object(U.jsx)(J,{isPro:w,username:k}),Object(U.jsxs)(Yt.a,{blocking:E,message:"Exporting to PDF. Please wait ...",children:[E&&Object(U.jsx)(na,{}),Object(U.jsx)("div",{className:"container-fluid",children:Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)(Xt,{notebookId:l}),void 0!==j.schedule&&""!==j.schedule&&Object(U.jsx)(aa,{notebookId:l}),P&&Object(U.jsx)(Qt,{notebookTitle:j.title,notebookId:l,notebookSchedule:j.schedule,taskCreatedAt:f.created_at,loadingState:h,waiting:D(),widgetsParams:null===j||void 0===j||null===(t=j.params)||void 0===t?void 0:t.params,watchMode:F(),notebookPath:I,displayEmbed:b,showFiles:function(e){if(e)for(var t=0,a=Object.entries(e);t<a.length;t++){if(de(Object(H.a)(a[t],2)[1]))return!0}return!1}(null===j||void 0===j||null===(a=j.params)||void 0===a?void 0:a.params),isPresentation:void 0!==j.output&&"slides"===j.output,notebookParseErrors:j.errors,continuousUpdate:null===j||void 0===j||null===(r=j.params)||void 0===r?void 0:r.continuous_update,staticNotebook:null===j||void 0===j||null===(o=j.params)||void 0===o?void 0:o.static_notebook}),!P&&Object(U.jsx)("div",{children:Object(U.jsx)("button",{className:"btn btn-sm  btn-outline-primary",type:"button",style:{position:"absolute",top:b?"5px":"50px",left:"5px",zIndex:"100"},onClick:function(){return p($(!0))},"data-toggle":"tooltip","data-placement":"right",title:"Show sidebar",children:Object(U.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"})})}),L&&Object(U.jsx)(ta,{slug:j.slug,widgetsParams:null===j||void 0===j||null===(i=j.params)||void 0===i?void 0:i.params,notebookPath:I,columnsWidth:P?9:12,taskSessionId:f.session_id}),Object(U.jsx)(Zt,{appView:O,loadingState:h,notebookPath:I,errorMsg:M,waiting:D(),watchMode:F(),displayEmbed:b,isPro:w,username:k,slidesHash:S,columnsWidth:P?9:12,isPresentation:void 0!==j.output&&"slides"===j.output}),"files"===O&&Object(U.jsx)($t,{files:g,filesState:y,waiting:D()})]})})]}),b&&Object(U.jsx)(ea,{})]})};var oa=Object(i.h)((function(){var e=Object(i.g)().notebook_id,t=Number(e),a=Object(i.g)().embed,n=!(!a||"embed"!==a);return Object(U.jsx)(Jt,{children:Object(U.jsx)(ra,{isSingleApp:!1,notebookId:t,displayEmbed:n})})}));function sa(){return Object(U.jsx)("footer",{className:"footer",style:{position:"absolute",bottom:"0",width:"100%",height:"40px",lineHeight:"40px",backgroundColor:"#f5f5f5",borderTop:"1px solid #e5e5e5"},children:Object(U.jsxs)("div",{className:"container",children:[Object(U.jsxs)("span",{className:"text-muted",style:{color:"gray"},children:["Mercury \xa9"," ",Object(U.jsx)("a",{style:{textDecoration:"none",color:"gray"},href:"https://mljar.com",target:"_blank",rel:"noreferrer",children:"MLJAR"})]}),Object(U.jsxs)("span",{className:"text-muted",style:{float:"right"},children:[Object(U.jsx)("a",{style:{textDecoration:"none",color:"gray"},href:"https://github.com/mljar/mercury",target:"_blank",rel:"noreferrer",children:"Mercury"})," ",Object(U.jsx)("i",{className:"fa fa-github","aria-hidden":"true"})]})]})})}function ca(e){var t=e.isPro,a=e.username;return Object(U.jsx)("header",{className:"navbar navbar-dark sticky-top bg-dark p-0",children:Object(U.jsxs)("div",{className:"row",style:{width:"100%",paddingRight:"0px"},children:[Object(U.jsx)("div",{className:"col-4"}),Object(U.jsx)("div",{className:"col-4 text-center",children:Object(U.jsx)("a",{href:"/",children:Object(U.jsx)("img",{alt:"Mercury",src:"/static/mercury_logo.svg",style:{height:"40px"}})})}),Object(U.jsxs)("div",{className:"col-4",style:{marginRight:"0px",paddingRight:"0px"},children:[t&&""===a&&Object(U.jsx)(B,{}),t&&""!==a&&Object(U.jsx)(z,{username:a})]})]})})}function ia(e){var t=e.featureName;return Object(U.jsx)("div",{style:{padding:"40px"},children:Object(U.jsxs)("div",{className:"alert alert-primary mb-3",role:"alert",children:[Object(U.jsxs)("h5",{children:[Object(U.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," This is a Pro feature"," "]}),"You are using an open-source version of the Mercury framework. The"," ",t," is a Pro feature available only for commercial users. Please consider purchasing the Mercury commercial license. It is perpetual and comes with additional features, dedicated support, and allows white-labeling. You can learn more about available licenses on our"," ",Object(U.jsx)("a",{href:"https://mljar.com/pricing",target:"_blank",rel:"noreferrer",children:"website"}),".",Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsxs)("a",{href:"/",children:[Object(U.jsx)("i",{className:"fa fa-home","aria-hidden":"true"})," Back to home"]})]})})}var la=Object(i.h)((function(){var e=Object(c.b)(),t=Object(n.useState)(""),a=Object(H.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(""),l=Object(H.a)(i,2),b=l[0],j=l[1],h=Object(n.useState)(""),f=Object(H.a)(h,2),m=f[0],v=f[1],x=Object(c.c)(_),O=Object(c.c)(M),g=Object(c.c)(C),y=Object(c.c)(E);return document.body.style.backgroundColor="white",Object(n.useEffect)((function(){x&&e(function(){var e=Object(u.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,s.a.get("/api/v1/auth/user/");case 4:a=e.sent,n=a.data,t(P(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Problem during getting user info. ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e,x,O]),Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(ca,{isPro:x,username:g}),!x&&!O&&Object(U.jsx)(ia,{featureName:"account view"}),x&&Object(U.jsx)("div",{className:"container",children:Object(U.jsxs)("div",{className:"mx-auto",style:{width:"700px"},children:[Object(U.jsxs)("div",{className:"row",style:{marginTop:"40px"},children:[Object(U.jsxs)("h2",{children:[Object(U.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," Account"]}),Object(U.jsxs)("form",{children:[Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("label",{className:"form-label",children:"Username"}),Object(U.jsx)("input",{className:"form-control",value:y.username,disabled:!0})]}),Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("label",{className:"form-label",children:"First name"}),Object(U.jsx)("input",{className:"form-control",value:y.first_name,disabled:!0})]}),Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("label",{className:"form-label",children:"Last name"}),Object(U.jsx)("input",{className:"form-control",value:y.last_name,disabled:!0})]}),Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("label",{className:"form-label",children:"Email address"}),Object(U.jsx)("input",{className:"form-control",value:y.email,disabled:!0})]})]})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)("div",{className:"row",children:[Object(U.jsxs)("h2",{children:[Object(U.jsx)("i",{className:"fa fa-key","aria-hidden":"true"})," Change password"]}),Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("label",{className:"form-label",children:"Old password"}),Object(U.jsx)("input",{type:"password",className:"form-control",value:r,onChange:function(e){return o(e.target.value)}})]}),Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("label",{className:"form-label",children:"New password"}),Object(U.jsx)("input",{type:"password",className:"form-control",value:b,onChange:function(e){return j(e.target.value)}})]}),Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("label",{className:"form-label",children:"Repeat new password"}),Object(U.jsx)("input",{type:"password",className:"form-control",value:m,onChange:function(e){return v(e.target.value)}})]}),Object(U.jsx)("div",{className:"mb-3",style:{paddingBottom:"50px"},children:Object(U.jsx)("button",{className:"btn btn-primary",onClick:function(){return e(function(e,t,a){return function(){var n=Object(u.a)(d.a.mark((function n(r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=4,s.a.post("/api/v1/auth/password/change/",{old_password:e,new_password1:t,new_password2:a});case 4:p.b.success("Password changed successfully"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),p.b.error("Password not changed. Problem during password change.");case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(r,b,m))},disabled:""===r||""===b||""===m,children:"Change password"})})]})]})]})}),Object(U.jsx)(sa,{})]})})),da=Object(i.h)((function(){var e=Object(c.b)(),t=Object(c.c)(Ce),a=Object(c.c)(Ee),r=Object(c.c)(L),o=Object(c.c)(_),i=Object(c.c)(C),l=Object(c.c)(T);Object(n.useEffect)((function(){e(function(){var e=Object(u.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(ye("")),t(xe("loading")),t(Ge()),e.next=7,s.a.get("/api/v1/notebooks/");case 7:a=e.sent,n=a.data,r=n.map((function(e){var t=JSON.parse(e.params);return Object(K.a)(Object(K.a)({},e),{},{params:t})})),t(ve(r)),t(xe("loaded")),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t(xe("error")),console.error("Problem during loading recent notebooks. ".concat(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(u.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,s.a.get("/api/v1/welcome/");case 4:a=e.sent,n=a.data,t(I(n.msg)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Problem during loading Mercury welcome message. ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e,l]);var b=function(e,t){return null!==e&&void 0!==e?e.slice(0,t)+(e.length>t?" ...":""):""},p=t.map((function(e,t){return Object(U.jsx)("div",{className:"col-md-4",style:{paddingBottom:"20px"},children:Object(U.jsxs)("div",{className:"card",children:[Object(U.jsx)("div",{style:{height:"200px",width:"100%",padding:"1px",overflow:"hidden"},children:Object(U.jsx)("iframe",{className:"thumbnailIframe",width:"200%",height:800,src:"".concat(s.a.defaults.baseURL).concat(e.default_view_path),title:"display",scrolling:"no"})}),Object(U.jsx)("a",{href:"/app/".concat(e.id),style:{textDecoration:"none",color:"black"},className:"title-card",children:Object(U.jsxs)("div",{className:"card-body",style:{borderTop:"1px solid rgba(0,0,0,0.1)",height:"110px"},children:[Object(U.jsx)("h5",{className:"card-title",children:b(e.title,40)}),Object(U.jsx)("p",{className:"card-text",children:b(e.params.description,100)})]})})]})},"notebook-".concat(e.id,"}"))}));return document.body.style.backgroundColor="white",Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(ca,{isPro:o,username:i}),Object(U.jsxs)("div",{className:"container",style:{paddingBottom:"50px"},children:[""===r&&Object(U.jsx)("h1",{style:{padding:"30px",textAlign:"center"},children:"Welcome!"}),""!==r&&Object(U.jsx)("div",{style:{paddingTop:"20px",paddingBottom:"10px"},children:Object(U.jsx)(wt.a,{rehypePlugins:[Nt.a,kt.a,St.a,Pt.a],children:r})}),Object(U.jsxs)("div",{className:"row",children:["loading"===a&&Object(U.jsx)("p",{children:"Loading notebooks. Please wait ..."}),"loaded"===a&&o&&0===t.length&&Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"alert alert-success",role:"alert",children:[Object(U.jsxs)("h5",{children:[Object(U.jsx)("i",{className:"fa fa-key","aria-hidden":"true"})," You are using Pro version"]}),Object(U.jsx)("p",{children:"There are no public notebooks shared. Please login with your credentials to check private notebooks."}),Object(U.jsxs)("a",{href:"/login",className:"btn btn-primary btn-sm ",children:[Object(U.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})]})}),"loaded"===a&&0===t.length&&Object(U.jsxs)("div",{children:[Object(U.jsx)("p",{children:"There are no notebooks available. Please add notebook to Mercury server."}),Object(U.jsx)("p",{children:"Command to watch notebook development in Mercury (with automatic refresh):"}),Object(U.jsx)("div",{className:"alert alert-primary",role:"alert",children:Object(U.jsxs)("pre",{style:{margin:"0px"},children:["mercury watch ","<path_to_notebook>"]})}),Object(U.jsx)("p",{children:"Command to add notebook to your Mercury server:"}),Object(U.jsx)("div",{className:"alert alert-primary",role:"alert",children:Object(U.jsxs)("pre",{style:{margin:"0px"},children:["mercury add ","<path_to_notebook>"]})})]}),"error"===a&&Object(U.jsx)("p",{children:"Problem while loading notebooks. Please try again later or contact Mercury administrator."}),p]})]}),Object(U.jsx)(sa,{})]})})),ua=Object(i.h)((function(){var e=Object(i.f)(),t=Object(c.b)(),a=Object(n.useState)(""),r=Object(H.a)(a,2),o=r[0],l=r[1],b=Object(n.useState)(""),j=Object(H.a)(b,2),h=j[0],f=j[1],m=Object(c.c)(_),v=Object(c.c)(M);return document.body.style.backgroundColor="#f5f5f5",Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(ca,{isPro:m,username:""}),!m&&!v&&Object(U.jsx)(ia,{featureName:"authentication"}),m&&Object(U.jsxs)("div",{className:"div-signin text-center",children:[Object(U.jsxs)("form",{className:"form-signin",onSubmit:function(a){a.preventDefault(),a.stopPropagation(),t(function(e,t,a){return function(){var n=Object(u.a)(d.a.mark((function n(r){var o,c,i,l,u,b,j,h;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=4,s.a.post("/api/v1/auth/login/",{username:e,password:t});case 4:o=n.sent,c=o.data,r(N(c.key)),r(S(e)),p.b.success("Log in successfull"),a.push("/"),n.next=18;break;case 12:n.prev=12,n.t0=n.catch(0),u=n.t0,b="Problem during authentication. ",void 0!==(null===(i=u.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.non_field_errors)&&(b+=null===(j=u.response)||void 0===j||null===(h=j.data)||void 0===h?void 0:h.non_field_errors),p.b.error(b);case 18:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(o,h,e))},children:[Object(U.jsx)("h3",{className:"h3 mb-3 font-weight-normal",children:"Please sign in"}),Object(U.jsx)("label",{className:"sr-only",children:"Username"}),Object(U.jsx)("input",{type:"username",id:"inputUsername",className:"form-control",placeholder:"Username",value:o,onChange:function(e){l(e.target.value)},required:!0}),Object(U.jsx)("label",{className:"sr-only",children:"Password"}),Object(U.jsx)("input",{type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",value:h,onChange:function(e){f(e.target.value)},required:!0}),Object(U.jsxs)("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",style:{margin:"5px"},disabled:""===o||""===h,children:[Object(U.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})]}),Object(U.jsx)("div",{className:"mx-auto",style:{width:"400px",marginTop:"40px"},children:Object(U.jsx)("p",{className:"text-muted",children:"No account? Please contact the service administrator to create the account for you."})})]}),Object(U.jsx)(sa,{})]})}));function ba(e){var t=e.children;return Object(U.jsx)(U.Fragment,{children:t})}function pa(){var e=Object(c.b)();return Object(n.useEffect)((function(){m(),e(function(){var e=Object(u.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,s.a.get("/api/v1/version/");case 4:a=e.sent,n=a.data,t(F(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Problem during loading Mercury version. ".concat(e.t0)),s.a.isAxiosError(e.t0)&&401===(null===(r=e.t0.response)||void 0===r?void 0:r.status)&&(t(N(null)),t(S(null)),window.location.reload());case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),localStorage.getItem("token")&&e(N(localStorage.getItem("token"))),localStorage.getItem("username")&&e(S(localStorage.getItem("username")))}),[]),Object(U.jsx)(W.a,{children:Object(U.jsx)(ba,{children:Object(U.jsxs)(i.c,{children:[Object(U.jsx)(i.a,{exact:!0,path:"/",component:da}),Object(U.jsx)(i.a,{exact:!0,path:"/app/:notebook_id/:embed?",component:oa}),Object(U.jsx)(i.a,{exact:!0,path:"/login",component:ua}),Object(U.jsx)(i.a,{exact:!0,path:"/account",component:la})]})})})}var ja=function(e){var t=e.store;e.history;return Object(U.jsx)(c.a,{store:t,children:Object(U.jsx)(pa,{})})},ha=a(13),fa=a(183),ma=a(30);var va,xa=Object(fa.a)(),Oa=Object(ma.b)({notebooks:fe,tasks:He,version:A,app:Y,auth:w,ws:Rt}),ga=Object(ha.a)(Object(b.c)()),ya=(a(310),a(311),a(313),a(314),a(315),a(316),a(317),a(318),Object(b.a)({reducer:Oa,middleware:ga,preloadedState:va}));"http://localhost:3000"===window.location.origin?s.a.defaults.baseURL="http://127.0.0.1:8000":s.a.defaults.baseURL=window.location.origin,window.location.origin.startsWith("https://hf.space")&&(s.a.defaults.baseURL=window.location.href),s.a.defaults.baseURL=s.a.defaults.baseURL.split("+")[0],s.a.defaults.baseURL=s.a.defaults.baseURL.split("?")[0],s.a.defaults.baseURL=s.a.defaults.baseURL.split("#")[0],document.addEventListener("DOMContentLoaded",(function(){return Object(r.render)(Object(U.jsxs)("div",{children:[Object(U.jsx)(ja,{store:ya,history:xa}),Object(U.jsx)(p.a,{position:"top-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0})]}),document.getElementById("root"))}))}},[[320,1,2]]]);
//# sourceMappingURL=main.141347ae.chunk.js.map